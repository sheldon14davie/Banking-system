<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>BANK MANAGEMENT SYSTEM</title>
</head>
<body>
  <div class="container">
        <div class="header">
            <img src="assets/images/bank.jpeg">
            <h1>CLOUT BANKING SOLUTIONS</h1>
            <p>Power,Influence and cash</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">Dashboard</button>
            <button class="nav-tab" onclick="showTab('create')">Create Account</button>
            <button class="nav-tab" onclick="showTab('transaction')">Transactions</button>
            <button class="nav-tab" onclick="showTab('accounts')">All Accounts</button>
        </div>

        <div class="content">
            <div id="alert-container"></div>

            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <h2>Dashboard Overview</h2>
                <div class="stats">
                    <div class="stat-card">
                        <h3 id="total-accounts">0</h3>
                        <p>Total Accounts</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-balance">$0</h3>
                        <p>Total Balance</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-transactions">0</h3>
                        <p>Total Transactions</p>
                    </div>
                </div>
            </div>

            <!-- Create Account Tab -->
            <div id="create" class="tab-content">
                <h2>Create New Account</h2>
                <form id="create-account-form">
                    <div class="form-group">
                        <label>Account Holder Name</label>
                        <input type="text" id="holder-name" required>
                    </div>
                    <div class="form-group">
                        <label>Account Type</label>
                        <select id="account-type" required>
                            <option value="">Select Type</option>
                            <option value="Savings">Savings</option>
                            <option value="Checking">Checking</option>
                            <option value="Business">Business</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Initial Deposit</label>
                        <input type="number" id="initial-deposit" min="0" step="0.01" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Create Account</button>
                </form>
            </div>

            <!-- Transaction Tab -->
            <div id="transaction" class="tab-content">
                <h2>Make Transaction</h2>
                <form id="transaction-form">
                    <div class="form-group">
                        <label>Select Account</label>
                        <select id="trans-account" required>
                            <option value="">Select Account</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Transaction Type</label>
                        <select id="trans-type" onchange="toggleTransferField()" required>
                            <option value="">Select your Type</option>
                            <option value="deposit">Deposit</option>
                            <option value="withdraw">Withdraw</option>
                            <option value="transfer">Transfer</option>
                        </select>
                    </div>
                    <div class="form-group" id="transfer-to-group" style="display: none;">
                        <label>Transfer To Account</label>
                        <select id="transfer-to">
                            <option value="">Select Account</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Amount</label>
                        <input type="number" id="trans-amount" min="0.01" step="0.01" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Process Transaction</button>
                </form>

                <h3 style="margin-top: 40px;">Recent Transactions</h3>
                <div class="transaction-list" id="transaction-list"></div>
            </div>

            <!-- All Accounts Tab -->
            <div id="accounts" class="tab-content">
                <h2>All Accounts</h2>
                <div id="accounts-list"></div>
            </div>
        </div>
    </div>
    <script>
        let accounts = [];
        let transactions = [];
        let accountIdCounter = 1000;

        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const navTabs = document.querySelectorAll('.nav-tab');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'dashboard') updateDashboard();
            if (tabName === 'accounts') displayAccounts();
            if (tabName === 'transaction') {
                updateTransactionSelects();
                displayTransactions();
            }
        }

        function showAlert(message, type) {
            const alertContainer = document.getElementById('alert-container');
            alertContainer.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            setTimeout(() => alertContainer.innerHTML = '', 3000);
        }

        document.getElementById('create-account-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('holder-name').value;
            const type = document.getElementById('account-type').value;
            const deposit = parseFloat(document.getElementById('initial-deposit').value);

            const account = {
                id: accountIdCounter++,
                name: name,
                type: type,
                balance: deposit,
                createdDate: new Date().toLocaleDateString()
            };

            accounts.push(account);
            
            transactions.push({
                id: transactions.length + 1,
                accountId: account.id,
                type: 'deposit',
                amount: deposit,
                date: new Date().toLocaleString(),
                description: 'Initial deposit'
            });

            showAlert(`Account created successfully! Account ID: ${account.id}`, 'success');
            this.reset();
        });

        document.getElementById('transaction-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const accountId = parseInt(document.getElementById('trans-account').value);
            const type = document.getElementById('trans-type').value;
            const amount = parseFloat(document.getElementById('trans-amount').value);
            
            const account = accounts.find(acc => acc.id === accountId);
            
            if (!account) {
                showAlert('Account not found!', 'danger');
                return;
            }

            if (type === 'withdraw' && account.balance < amount) {
                showAlert('Insufficient balance!', 'danger');
                return;
            }

            if (type === 'transfer') {
                const transferToId = parseInt(document.getElementById('transfer-to').value);
                const transferToAccount = accounts.find(acc => acc.id === transferToId);
                
                if (!transferToAccount) {
                    showAlert('Transfer account not found!', 'danger');
                    return;
                }
                
                if (account.balance < amount) {
                    showAlert('Insufficient balance for transfer!', 'danger');
                    return;
                }
                
                account.balance -= amount;
                transferToAccount.balance += amount;
                
                transactions.push({
                    id: transactions.length + 1,
                    accountId: accountId,
                    type: 'transfer',
                    amount: -amount,
                    date: new Date().toLocaleString(),
                    description: `Transfer to Account #${transferToId}`
                });
                
                transactions.push({
                    id: transactions.length + 1,
                    accountId: transferToId,
                    type: 'transfer',
                    amount: amount,
                    date: new Date().toLocaleString(),
                    description: `Transfer from Account #${accountId}`
                });
                
                showAlert(`Transfer of $${amount.toFixed(2)} completed successfully!`, 'success');
            } else {
                if (type === 'deposit') {
                    account.balance += amount;
                } else if (type === 'withdraw') {
                    account.balance -= amount;
                }

                transactions.push({
                    id: transactions.length + 1,
                    accountId: accountId,
                    type: type,
                    amount: type === 'withdraw' ? -amount : amount,
                    date: new Date().toLocaleString(),
                    description: type.charAt(0).toUpperCase() + type.slice(1)
                });

                showAlert(`${type.charAt(0).toUpperCase() + type.slice(1)} of $${amount.toFixed(2)} completed successfully!`, 'success');
            }

            displayTransactions();
            this.reset();
            document.getElementById('transfer-to-group').style.display = 'none';
        });

        function toggleTransferField() {
            const type = document.getElementById('trans-type').value;
            const transferGroup = document.getElementById('transfer-to-group');
            transferGroup.style.display = type === 'transfer' ? 'block' : 'none';
        }

        function updateTransactionSelects() {
            const transAccount = document.getElementById('trans-account');
            const transferTo = document.getElementById('transfer-to');
            
            transAccount.innerHTML = '<option value="">Select Account</option>';
            transferTo.innerHTML = '<option value="">Select Account</option>';
            
            accounts.forEach(acc => {
                transAccount.innerHTML += `<option value="${acc.id}">${acc.name} - #${acc.id} ($${acc.balance.toFixed(2)})</option>`;
                transferTo.innerHTML += `<option value="${acc.id}">${acc.name} - #${acc.id}</option>`;
            });
        }

        function displayAccounts() {
            const accountsList = document.getElementById('accounts-list');
            
            if (accounts.length === 0) {
                accountsList.innerHTML = '<div class="no-data">No accounts found. Create one to get started!</div>';
                return;
            }

            accountsList.innerHTML = accounts.map(acc => `
                <div class="account-card">
                    <div class="account-info">
                        <div class="account-details">
                            <h3>${acc.name}</h3>
                            <p>Account #${acc.id} | ${acc.type}</p>
                            <p>Created: ${acc.createdDate}</p>
                        </div>
                        <div class="balance">$${acc.balance.toFixed(2)}</div>
                    </div>
                </div>
            `).join('');
        }

        function displayTransactions() {
            const transList = document.getElementById('transaction-list');
            
            if (transactions.length === 0) {
                transList.innerHTML = '<div class="no-data">No transactions yet.</div>';
                return;
            }

            transList.innerHTML = transactions.slice().reverse().map(trans => {
                const account = accounts.find(acc => acc.id === trans.accountId);
                return `
                    <div class="transaction-item">
                        <div>
                            <span class="transaction-type ${trans.type}">${trans.type.toUpperCase()}</span>
                            <p><strong>${account ? account.name : 'Unknown'}</strong> - ${trans.description}</p>
                            <small>${trans.date}</small>
                        </div>
                        <div class="balance" style="color: ${trans.amount >= 0 ? '#28a745' : '#dc3545'}">
                            ${trans.amount >= 0 ? '+' : ''}$${trans.amount.toFixed(2)}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateDashboard() {
            document.getElementById('total-accounts').textContent = accounts.length;
            const totalBalance = accounts.reduce((sum, acc) => sum + acc.balance, 0);
            document.getElementById('total-balance').textContent = `$${totalBalance.toFixed(2)}`;
            document.getElementById('total-transactions').textContent = transactions.length;
        }

        updateDashboard();
    </script>
</body>
</html>